@using ECom.Shared.Abstract.Services.Admin
@using ECom.Shared.Entities
@inherits SharedBasePage
@inject IAdminCompanyInformationService CompanyInformationService
@page "/options/company"
<RadzenRow class="mb-5">
  <RadzenColumn>
    <RadzenCard>
      <RadzenTemplateForm TItem="CompanyInformation" Data="_editedCompanyInformation" Submit="UpdateCompanyInfo">
        <RadzenTabs @bind-SelectedIndex=@selectedIndex>
          <Tabs>
            <RadzenTabsItem Text="@Loc["general"]">
              <RadzenStack Orientation="Orientation.Vertical" JustifyContent="JustifyContent.Start" AlignItems="AlignItems.Start" Gap="20">
                <RadzenFormField class="w-100 " Style="max-width:500px" Text="@Loc["company_name"]" Variant="Variant.Filled">
                  <RadzenTextBox @bind-Value="_editedCompanyInformation.CompanyName" MaxLength="@ValidationSettings.MaxNameLength"></RadzenTextBox>
                </RadzenFormField>
                
                <RadzenFormField class="w-100" Style="max-width:500px" Text="@Loc["phone_number"]" Variant="Variant.Filled">
                  <RadzenMask Mask="(***) ***-****" CharacterPattern="[0-9]" MaxLength="@ValidationSettings.MaxPhoneLength" Placeholder="(000) 000-0000" @bind-Value="_editedCompanyInformation.CompanyAddress" />
                </RadzenFormField>
                <RadzenFormField class="w-100" Style="max-width:500px" Text="@Loc["contact_email"]" Variant="Variant.Filled">
                  <RadzenMask Pattern="@ValidationSettings.RegexEmail" MaxLength="@ValidationSettings.MaxEmailLength" Placeholder="example.mail.com" @bind-Value="_editedCompanyInformation.ContactEmail" />
                </RadzenFormField>
                <RadzenFormField class="w-100" Text="@Loc["description"]" Variant="Variant.Filled">
                  <RadzenTextArea Style="min-height: 70px" @bind-Value="_editedCompanyInformation.Description" MaxLength="@ValidationSettings.MaxDescriptionLength"></RadzenTextArea>
                </RadzenFormField>
                <RadzenFormField class="w-100" Text="@Loc["company_address"]" Variant="Variant.Filled">
                  <RadzenTextArea Style="min-height: 70px" @bind-Value="_editedCompanyInformation.CompanyAddress" MaxLength="@ValidationSettings.MaxDescriptionLength"></RadzenTextArea>
                </RadzenFormField>
              </RadzenStack>
            </RadzenTabsItem>
            <RadzenTabsItem Text="@Loc["social_media"]">
              <RadzenStack Orientation="Orientation.Vertical" JustifyContent="JustifyContent.Start" AlignItems="AlignItems.Start" Gap="20">
                <RadzenFormField class="w-100" Text="@Loc["facebook_link"]" Variant="Variant.Filled">
                  <RadzenTextBox @bind-Value="_editedCompanyInformation.FacebookLink" MaxLength="@ValidationSettings.MaxDomainLength"></RadzenTextBox>
                </RadzenFormField>
                <RadzenFormField class="w-100" Text="@Loc["instagram_link"]" Variant="Variant.Filled">
                  <RadzenTextBox @bind-Value="_editedCompanyInformation.InstagramLink" MaxLength="@ValidationSettings.MaxDomainLength"></RadzenTextBox>
                </RadzenFormField>
                <RadzenFormField class="w-100" Text="@Loc["youtube_link"]" Variant="Variant.Filled">
                  <RadzenTextBox @bind-Value="_editedCompanyInformation.YoutubeLink" MaxLength="@ValidationSettings.MaxDomainLength"></RadzenTextBox>
                </RadzenFormField>
                <RadzenFormField class="w-100" Text="@Loc["whatsapp"]" Variant="Variant.Filled">
                  <RadzenMask Mask="(***) ***-****" CharacterPattern="[0-9]" MaxLength="@ValidationSettings.MaxPhoneLength" Placeholder="(000) 000-0000" @bind-Value="_editedCompanyInformation.WhatsApp" />
                </RadzenFormField>
              </RadzenStack>
            </RadzenTabsItem>
            <RadzenTabsItem Text="@Loc["urls"]">
              <RadzenStack Orientation="Orientation.Vertical" JustifyContent="JustifyContent.Start" AlignItems="AlignItems.Start" Gap="20">
                <RadzenFormField class="w-100" Text="@Loc["domain_url"]" Variant="Variant.Filled">
                  <RadzenTextBox @bind-Value="_editedCompanyInformation.DomainUrl" MaxLength="@ValidationSettings.MaxDomainLength"></RadzenTextBox>
                </RadzenFormField>
                <RadzenFormField class="w-100" Text="@Loc["web_api_url"]" Variant="Variant.Filled">
                  <RadzenTextBox @bind-Value="_editedCompanyInformation.WebApiUrl" MaxLength="@ValidationSettings.MaxDomainLength"></RadzenTextBox>
                </RadzenFormField>
              </RadzenStack>
            </RadzenTabsItem>
            <RadzenTabsItem Text="@Loc["images"]">
              @*
                TODO: add image view on button click for both images
                TODO: add image upload on button click for both images

              *@
            </RadzenTabsItem>
          </Tabs>
        </RadzenTabs>
        
      </RadzenTemplateForm>
    </RadzenCard>
  </RadzenColumn>
</RadzenRow>
@*TODO: Add save and reset button functionality*@



@code {
  int selectedIndex = 0;
  private CompanyInformation _companyInformation = new CompanyInformation();
  private CompanyInformation _editedCompanyInformation = new CompanyInformation();
  protected override void OnInitialized() {
    base.OnInitialized();
    _companyInformation = CompanyInformationService.GetCompanyInformation();
    _editedCompanyInformation = _companyInformation;
  }

  private void UpdateCompanyInfo(CompanyInformation obj) {

  }

}
