@using System.ComponentModel.DataAnnotations
@using System.Globalization
@using ECom.Shared.Constants
@using ECom.Shared.Models

@code {
  [Parameter]
  [Required]
  public ValidationType ValidationType { get; set; }

  [Parameter]
  [Required]
  public string Component { get; set; }

  [Parameter]
  public bool Popup { get; set; } = false;

  [Parameter]
  public string Style { get; set; } = "";

  [Parameter]
  public string LocKey { get; set; } = "";

  protected readonly CultureInfo CurrentCultureInfo = Thread.CurrentThread.CurrentCulture;

  protected StringValidation StringValidation => ValidationSettings.GetValidation(ValidationType);

  protected override void OnInitialized() {
    base.OnInitialized();
    if (StringValidation is null) {
      throw new Exception($"ValidationSettings does not contain a validation for {ValidationType}");
    }
    if (string.IsNullOrEmpty(Component)) {
      throw new Exception($"Component is required");
    }
    if(string.IsNullOrEmpty(LocKey)) {
      LocKey = StringValidation.LocKey;
    }
  }
}
